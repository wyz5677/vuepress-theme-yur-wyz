(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{567:function(t,s,a){"use strict";a.r(s);var n=a(37),r=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("p",[s("br"),s("br"),s("br")]),t._v(" "),s("h2",{attrs:{id:"第三章-vue-js-3的设计思路"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#第三章-vue-js-3的设计思路"}},[t._v("#")]),t._v(" 第三章：vue.js 3的设计思路")]),t._v(" "),s("p",[t._v("🍹 心得 ：vue包含编译系统和渲染系统，各司其职")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",[t._v("1 vue可以通过"),s("font",{attrs:{color:"red"}},[t._v("模板")]),t._v("或者"),s("font",{attrs:{color:"red"}},[t._v("虚拟dom")]),t._v("两种方式描述ui，虚拟dom更灵活，模板更直观")],1)]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",[t._v("2 "),s("font",{attrs:{color:"red"}},[t._v("渲染系统")]),t._v("可以把"),s("font",{attrs:{color:"red"}},[t._v("虚拟dom转为真实的dom并挂载")]),t._v("，其"),s("font",{attrs:{color:"red"}},[t._v("精髓在于用diff算法来做dom更新的比较")]),t._v("，只更新需要更新的内容")],1)]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",[t._v("3 "),s("font",{attrs:{color:"red"}},[t._v("组件的本质")]),t._v("就是一组"),s("font",{attrs:{color:"red"}},[t._v("虚拟dom元素")]),t._v("的封装，可以是返回虚拟dom的"),s("font",{attrs:{color:"red"}},[t._v("函数")]),t._v("，也可以是一个"),s("font",{attrs:{color:"red"}},[t._v("对象")]),t._v("，对象必须要有函数来产出组件需要渲染的虚拟dom，渲染组件会递归的调用渲染器渲染其的subtree")],1)]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",[t._v("4 "),s("font",{attrs:{color:"red"}},[t._v("编译系统编译模板为渲染函数")])],1)]),t._v(" "),s("br"),t._v(" "),s("hr"),t._v(" "),s("br"),t._v(" "),s("blockquote",[s("p",[t._v("要点：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("1")]),t._v(" vue提供两种方式描述ui，一种是模板（template），一种是虚拟dom（js对象来描述真实的dom结构）的方式")]),t._v(" "),s("li",[s("code",[t._v("2")]),t._v(" 渲染系统主要是 render函数和函数中的h函数，主要做的事情就是通过h函数把js Ast给转为虚拟dom，然后通过mount函数把虚拟dom转为真实dom并挂载到真实的dom（比如id为app的div）节点下，在更新的时候，通过patch函数来对比两个节点的子节点，生成新的虚拟dom,再挂载")]),t._v(" "),s("li",[s("code",[t._v("3")]),t._v(" 渲染系统中render函数中的h函数就是辅助创建虚拟dom的工具函数，比如虚拟dom如果很多子节点，需要编写的内容就很多，h函数来包裹后就会少很多代码")]),t._v(" "),s("li",[s("code",[t._v("4")]),t._v(" 组件的本质是函数或者对象（有状态组件）")]),t._v(" "),s("li",[s("code",[t._v("5")]),t._v(" 模板的工作原理就是把template(模板认为是字符串)生成一个与之对应的渲染函数render,然后放入到比如单文件组件的script标签中的组件对象上（和methods平级），然后交给渲染系统处理")])])]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("script"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("data")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("methods")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("h")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'div'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("onclick")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("handler"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'click me'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("script"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br")])]),s("blockquote",[s("ul",[s("li",[s("code",[t._v("6")]),t._v(" vue会通过把动态的内容做一个标识（patchFlags）来提升渲染系统的性能")])])])])}),[],!1,null,null,null);s.default=r.exports}}]);